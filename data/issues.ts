import { LexoRank } from '@/lib/utils';
import { LabelInterface, labels } from './labels';
import { Priority, priorities } from './priorities';
import { Project, projects } from './projects';
import { Status, status } from './status';
import { User, users } from './users';

export interface Issue {
   id: string;
   identifier: string;
   title: string;
   description: string;
   status: Status;
   assignee: User | null;
   priority: Priority;
   labels: LabelInterface[];
   createdAt: string;
   cycleId: string;
   project?: Project;
   projectId?: string;
   subissues?: string[];
   rank: string;
   dueDate?: string;
}

// Generates issues ranks using LexoRank algorithm
export const ranks: string[] = [];
const generateIssuesRanks = () => {
   const firstRank = new LexoRank('a3c');
   ranks.push(firstRank.toString());
   for (let i = 1; i < 50; i++) {
      const previousRank = LexoRank.from(ranks[i - 1]);
      const currentRank = previousRank.increment();
      ranks.push(currentRank.toString());
   }
};
generateIssuesRanks();

// Group issues by status
export function groupIssuesByStatus(issuesList: Issue[]): Record<string, Issue[]> {
   return issuesList.reduce((acc, issue) => {
      const statusId = issue.status.id;
      if (!acc[statusId]) {
         acc[statusId] = [];
      }
      acc[statusId].push(issue);
      return acc;
   }, {} as Record<string, Issue[]>);
}

// Sort issues by priority
export function sortIssuesByPriority(issuesList: Issue[]): Issue[] {
   const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3, 'no-priority': 4 };
   return [...issuesList].sort((a, b) => {
      const aPriority = priorityOrder[a.priority.id as keyof typeof priorityOrder] ?? 4;
      const bPriority = priorityOrder[b.priority.id as keyof typeof priorityOrder] ?? 4;
      return aPriority - bPriority;
   });
}

export const issues: Issue[] = [
   // Sidebar & Navigation System
   {
      id: '1',
      identifier: 'LC-101',
      title: 'Implement collapsible sidebar with Linear design',
      description: 'Create a sidebar matching Linear\'s exact design with collapsible sections, icons, and navigation items',
      status: status[0],
      priority: priorities[0],
      assignee: users[1],
      labels: [labels[3]],
      createdAt: '2025-01-20',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[0],
      dueDate: '2025-02-05',
   },
   {
      id: '2',
      identifier: 'LC-102',
      title: 'Add nested Cycles menu with Upcoming submenu',
      description: 'Implement nested collapsible menu for Cycles with expandable Upcoming section',
      status: status[0],
      priority: priorities[0],
      assignee: users[0],
      labels: [labels[0]],
      createdAt: '2025-01-21',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[1],
      dueDate: '2025-02-03',
   },
   {
      id: '3',
      identifier: 'LC-103',
      title: 'Integrate Linear SVG icons for sidebar items',
      description: 'Replace generic icons with Linear\'s exact SVG icons for inbox, issues, views',
      status: status[0],
      priority: priorities[1],
      assignee: users[1],
      labels: [labels[3]],
      createdAt: '2025-01-22',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[2],
      dueDate: '2025-02-04',
   },
   {
      id: '4',
      identifier: 'LC-104',
      title: 'Add search bar to sidebar header',
      description: 'Implement functional search bar in sidebar header with proper styling',
      status: status[1],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0]],
      createdAt: '2025-01-23',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[3],
      dueDate: '2025-02-08',
   },
   {
      id: '5',
      identifier: 'LC-105',
      title: 'Create workspace switcher dropdown',
      description: 'Build dropdown menu for switching between workspaces with Linear\'s styling',
      status: status[1],
      priority: priorities[2],
      assignee: users[3],
      labels: [labels[3]],
      createdAt: '2025-01-24',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[4],
      dueDate: '2025-02-10',
   },

   // Issue Management System
   {
      id: '6',
      identifier: 'LC-201',
      title: 'Build issue creation modal',
      description: 'Create modal for creating new issues with title, description, assignee, labels, priority',
      status: status[1],
      priority: priorities[0],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-18',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[5],
      dueDate: '2025-02-06',
   },
   {
      id: '7',
      identifier: 'LC-202',
      title: 'Implement issue list view with filtering',
      description: 'Display issues in list format with filters for status, assignee, labels, priority',
      status: status[1],
      priority: priorities[0],
      assignee: users[0],
      labels: [labels[0], labels[3]],
      createdAt: '2025-01-19',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[6],
      dueDate: '2025-02-07',
   },
   {
      id: '8',
      identifier: 'LC-203',
      title: 'Add issue detail modal with edit functionality',
      description: 'Create detailed view modal for viewing and editing issue properties',
      status: status[1],
      priority: priorities[1],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-20',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[7],
      dueDate: '2025-02-09',
   },
   {
      id: '9',
      identifier: 'LC-204',
      title: 'Implement drag-and-drop for issue reordering',
      description: 'Add ability to reorder issues via drag-and-drop using LexoRank algorithm',
      status: status[2],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0], labels[2]],
      createdAt: '2025-01-21',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[8],
      dueDate: '2025-02-12',
   },
   {
      id: '10',
      identifier: 'LC-205',
      title: 'Add issue status workflow transitions',
      description: 'Implement status transitions (Backlog → Todo → In Progress → Done → Canceled)',
      status: status[1],
      priority: priorities[0],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-22',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[9],
      dueDate: '2025-02-05',
   },

   // Core Features
   {
      id: '11',
      identifier: 'LC-301',
      title: 'Set up Next.js project structure',
      description: 'Initialize Next.js 15 project with TypeScript, Tailwind CSS, and shadcn/ui',
      status: status[0],
      priority: priorities[0],
      assignee: users[0],
      labels: [labels[5]],
      createdAt: '2025-01-15',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[10],
      dueDate: '2025-01-20',
   },
   {
      id: '12',
      identifier: 'LC-302',
      title: 'Configure routing and layouts',
      description: 'Set up app router structure with dynamic routes for org, team, and issue pages',
      status: status[0],
      priority: priorities[0],
      assignee: users[0],
      labels: [labels[1]],
      createdAt: '2025-01-16',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[11],
      dueDate: '2025-01-22',
   },
   {
      id: '13',
      identifier: 'LC-303',
      title: 'Create mock data structures',
      description: 'Define and populate mock data for users, teams, projects, issues, labels',
      status: status[0],
      priority: priorities[0],
      assignee: users[3],
      labels: [labels[4]],
      createdAt: '2025-01-17',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[12],
      dueDate: '2025-01-25',
   },
   {
      id: '14',
      identifier: 'LC-304',
      title: 'Implement main layout with sidebar',
      description: 'Create main app layout combining sidebar, header, and content area',
      status: status[1],
      priority: priorities[0],
      assignee: users[1],
      labels: [labels[3]],
      createdAt: '2025-01-18',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[13],
      dueDate: '2025-01-28',
   },
   {
      id: '15',
      identifier: 'LC-305',
      title: 'Add responsive design for mobile/tablet',
      description: 'Ensure all components work seamlessly on mobile and tablet devices',
      status: status[2],
      priority: priorities[1],
      assignee: users[1],
      labels: [labels[3]],
      createdAt: '2025-01-19',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[14],
      dueDate: '2025-02-15',
   },

   // Project & Team Management
   {
      id: '16',
      identifier: 'LC-401',
      title: 'Create projects page with grid/list view',
      description: 'Display all projects in grid or list format with status, progress, and health indicators',
      status: status[1],
      priority: priorities[1],
      assignee: users[3],
      labels: [labels[0], labels[3]],
      createdAt: '2025-01-22',
      cycleId: '1',
      project: projects[3],
      projectId: '4',
      rank: ranks[15],
      dueDate: '2025-02-08',
   },
   {
      id: '17',
      identifier: 'LC-402',
      title: 'Build teams page with member management',
      description: 'Show all teams with member count, projects, and join/leave functionality',
      status: status[1],
      priority: priorities[1],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-23',
      cycleId: '1',
      project: projects[3],
      projectId: '4',
      rank: ranks[16],
      dueDate: '2025-02-10',
   },
   {
      id: '18',
      identifier: 'LC-403',
      title: 'Add project detail page',
      description: 'Create detailed project view showing issues, milestones, and team members',
      status: status[2],
      priority: priorities[2],
      assignee: users[0],
      labels: [labels[0]],
      createdAt: '2025-01-24',
      cycleId: '1',
      project: projects[3],
      projectId: '4',
      rank: ranks[17],
      dueDate: '2025-02-18',
   },
   {
      id: '19',
      identifier: 'LC-404',
      title: 'Implement team settings page',
      description: 'Allow team admins to configure team name, icon, color, and members',
      status: status[2],
      priority: priorities[2],
      assignee: users[3],
      labels: [labels[0]],
      createdAt: '2025-01-25',
      cycleId: '1',
      project: projects[3],
      projectId: '4',
      rank: ranks[18],
      dueDate: '2025-02-20',
   },

   // Dark Mode & Theming
   {
      id: '20',
      identifier: 'LC-501',
      title: 'Implement dark mode theme',
      description: 'Add dark mode support with Linear\'s color palette and theme toggle',
      status: status[0],
      priority: priorities[1],
      assignee: users[1],
      labels: [labels[3], labels[2]],
      createdAt: '2025-01-10',
      cycleId: '1',
      project: projects[4],
      projectId: '5',
      rank: ranks[19],
      dueDate: '2025-01-30',
   },
   {
      id: '21',
      identifier: 'LC-502',
      title: 'Create theme provider and context',
      description: 'Set up theme context for managing light/dark mode state across app',
      status: status[0],
      priority: priorities[1],
      assignee: users[1],
      labels: [labels[1]],
      createdAt: '2025-01-11',
      cycleId: '1',
      project: projects[4],
      projectId: '5',
      rank: ranks[20],
      dueDate: '2025-01-28',
   },
   {
      id: '22',
      identifier: 'LC-503',
      title: 'Add theme persistence with cookies',
      description: 'Save user theme preference to cookies for persistence across sessions',
      status: status[0],
      priority: priorities[2],
      assignee: users[0],
      labels: [labels[2]],
      createdAt: '2025-01-12',
      cycleId: '1',
      project: projects[4],
      projectId: '5',
      rank: ranks[21],
      dueDate: '2025-02-01',
   },

   // Keyboard Shortcuts & Command Palette
   {
      id: '23',
      identifier: 'LC-601',
      title: 'Build command palette (Cmd+K)',
      description: 'Create command palette for quick navigation and actions like Linear\'s',
      status: status[1],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0], labels[3]],
      createdAt: '2025-01-25',
      cycleId: '1',
      project: projects[5],
      projectId: '6',
      rank: ranks[22],
      dueDate: '2025-02-12',
   },
   {
      id: '24',
      identifier: 'LC-602',
      title: 'Add global keyboard shortcuts',
      description: 'Implement keyboard shortcuts: C (create issue), / (search), G+I (go to inbox)',
      status: status[1],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0]],
      createdAt: '2025-01-26',
      cycleId: '1',
      project: projects[5],
      projectId: '6',
      rank: ranks[23],
      dueDate: '2025-02-10',
   },
   {
      id: '25',
      identifier: 'LC-603',
      title: 'Create shortcuts help modal',
      description: 'Display all available keyboard shortcuts in a modal (triggered by ?)',
      status: status[2],
      priority: priorities[2],
      assignee: users[3],
      labels: [labels[3]],
      createdAt: '2025-01-27',
      cycleId: '1',
      project: projects[5],
      projectId: '6',
      rank: ranks[24],
      dueDate: '2025-02-15',
   },

   // Notifications & Activity Feed
   {
      id: '26',
      identifier: 'LC-701',
      title: 'Design notification inbox UI',
      description: 'Create inbox interface for displaying user notifications and updates',
      status: status[2],
      priority: priorities[2],
      assignee: users[2],
      labels: [labels[3]],
      createdAt: '2025-02-01',
      cycleId: '2',
      project: projects[6],
      projectId: '7',
      rank: ranks[25],
      dueDate: '2025-02-20',
   },
   {
      id: '27',
      identifier: 'LC-702',
      title: 'Implement real-time notifications',
      description: 'Add toast notifications for important events (issue assigned, status changed)',
      status: status[2],
      priority: priorities[2],
      assignee: users[0],
      labels: [labels[0], labels[2]],
      createdAt: '2025-02-02',
      cycleId: '2',
      project: projects[6],
      projectId: '7',
      rank: ranks[26],
      dueDate: '2025-02-22',
   },
   {
      id: '28',
      identifier: 'LC-703',
      title: 'Add notification preferences',
      description: 'Allow users to customize which events trigger notifications',
      status: status[2],
      priority: priorities[3],
      assignee: users[1],
      labels: [labels[0]],
      createdAt: '2025-02-03',
      cycleId: '2',
      project: projects[6],
      projectId: '7',
      rank: ranks[27],
      dueDate: '2025-02-25',
   },

   // Search & Filtering
   {
      id: '29',
      identifier: 'LC-801',
      title: 'Implement issue search functionality',
      description: 'Add search bar to filter issues by title, description, ID',
      status: status[1],
      priority: priorities[1],
      assignee: users[3],
      labels: [labels[0]],
      createdAt: '2025-01-28',
      cycleId: '1',
      project: projects[7],
      projectId: '8',
      rank: ranks[28],
      dueDate: '2025-02-14',
   },
   {
      id: '30',
      identifier: 'LC-802',
      title: 'Add advanced filter options',
      description: 'Create filter UI for status, assignee, labels, priority, dates',
      status: status[1],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0], labels[3]],
      createdAt: '2025-01-29',
      cycleId: '1',
      project: projects[7],
      projectId: '8',
      rank: ranks[29],
      dueDate: '2025-02-16',
   },
   {
      id: '31',
      identifier: 'LC-803',
      title: 'Implement saved filter views',
      description: 'Allow users to save and reuse custom filter configurations',
      status: status[2],
      priority: priorities[2],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-30',
      cycleId: '2',
      project: projects[7],
      projectId: '8',
      rank: ranks[30],
      dueDate: '2025-02-25',
   },

   // Cycles & Roadmap View
   {
      id: '32',
      identifier: 'LC-901',
      title: 'Create cycles data structure',
      description: 'Define cycle model with start/end dates, goals, and associated issues',
      status: status[2],
      priority: priorities[2],
      assignee: users[1],
      labels: [labels[4]],
      createdAt: '2025-02-05',
      cycleId: '2',
      project: projects[8],
      projectId: '9',
      rank: ranks[31],
      dueDate: '2025-03-01',
   },
   {
      id: '33',
      identifier: 'LC-902',
      title: 'Build cycles view page',
      description: 'Display current, upcoming, and past cycles with progress indicators',
      status: status[2],
      priority: priorities[2],
      assignee: users[3],
      labels: [labels[0], labels[3]],
      createdAt: '2025-02-06',
      cycleId: '2',
      project: projects[8],
      projectId: '9',
      rank: ranks[32],
      dueDate: '2025-03-05',
   },
   {
      id: '34',
      identifier: 'LC-903',
      title: 'Implement roadmap timeline view',
      description: 'Create visual timeline showing projects and milestones across time',
      status: status[2],
      priority: priorities[3],
      assignee: users[0],
      labels: [labels[0], labels[3]],
      createdAt: '2025-02-07',
      cycleId: '2',
      project: projects[8],
      projectId: '9',
      rank: ranks[33],
      dueDate: '2025-03-10',
   },
   {
      id: '35',
      identifier: 'LC-904',
      title: 'Add drag-and-drop for cycle planning',
      description: 'Allow dragging issues between cycles for planning',
      status: status[2],
      priority: priorities[3],
      assignee: users[2],
      labels: [labels[0], labels[2]],
      createdAt: '2025-02-08',
      cycleId: '2',
      project: projects[8],
      projectId: '9',
      rank: ranks[34],
      dueDate: '2025-03-12',
   },

   // Additional Core Issues
   {
      id: '36',
      identifier: 'LC-1001',
      title: 'Fix sidebar hover states',
      description: 'Ensure hover effects match Linear\'s exact styling and transitions',
      status: status[1],
      priority: priorities[1],
      assignee: users[1],
      labels: [labels[6]],
      createdAt: '2025-01-26',
      cycleId: '1',
      project: projects[1],
      projectId: '2',
      rank: ranks[35],
      dueDate: '2025-02-02',
   },
   {
      id: '37',
      identifier: 'LC-1002',
      title: 'Optimize issue list rendering performance',
      description: 'Implement virtualization for large issue lists to improve scroll performance',
      status: status[1],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[2], labels[1]],
      createdAt: '2025-01-27',
      cycleId: '1',
      project: projects[2],
      projectId: '3',
      rank: ranks[36],
      dueDate: '2025-02-11',
   },
   {
      id: '38',
      identifier: 'LC-1003',
      title: 'Add member avatars and tooltips',
      description: 'Display user avatars with hover tooltips showing name and status',
      status: status[1],
      priority: priorities[2],
      assignee: users[3],
      labels: [labels[3]],
      createdAt: '2025-01-28',
      cycleId: '1',
      project: projects[0],
      projectId: '1',
      rank: ranks[37],
      dueDate: '2025-02-09',
   },
   {
      id: '39',
      identifier: 'LC-1004',
      title: 'Implement label color customization',
      description: 'Allow admins to create and customize label colors and names',
      status: status[2],
      priority: priorities[2],
      assignee: users[2],
      labels: [labels[0]],
      createdAt: '2025-01-29',
      cycleId: '2',
      project: projects[0],
      projectId: '1',
      rank: ranks[38],
      dueDate: '2025-02-18',
   },
   {
      id: '40',
      identifier: 'LC-1005',
      title: 'Add issue comments and activity log',
      description: 'Implement commenting system and activity timeline for issues',
      status: status[2],
      priority: priorities[1],
      assignee: users[0],
      labels: [labels[0], labels[2]],
      createdAt: '2025-01-30',
      cycleId: '2',
      project: projects[2],
      projectId: '3',
      rank: ranks[39],
      dueDate: '2025-02-22',
   },
];
